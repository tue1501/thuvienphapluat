<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>VN_WQI 1460 ‚Äì M√°y t√≠nh ch·ªâ s·ªë ch·∫•t l∆∞·ª£ng n∆∞·ªõc</title>
  <meta name="theme-color" content="#0b1220" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="icon-192.png" sizes="192x192" />
  <link rel="apple-touch-icon" href="icon-192.png" />
  <link rel="stylesheet" href="styles.css" />
  <!-- MathJax v3 for LaTeX -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']] },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body>
  <header class="site-header">
    <div class="wrap hero">
      <div class="title">
        <div class="brand">
          <div class="logo">üíß</div>
          <div>
            <h1>VN_WQI ‚Äì Ch·ªâ s·ªë ch·∫•t l∆∞·ª£ng n∆∞·ªõc (Qƒê 1460)</h1>
            <p class="subtitle">Dark ¬∑ Responsive ¬∑ Sticky Results ¬∑ L∆∞u/Kh√¥i ph·ª•c ¬∑ CSV/PDF ¬∑ PWA ¬∑ LaTeX</p>
          </div>
        </div>
        <div class="pill" id="stickySummary">VN_WQI: ‚Äì ¬∑ M·ª©c: ‚Äì</div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- Toolbar -->
    <section class="card">
      <div class="toolbar">
        <input id="datasetName" class="grow" type="text" placeholder="T√™n b·ªô s·ªë li·ªáu (v√≠ d·ª•: Song_Hong_2025-09-05)" />
        <button class="btn" id="saveBtn">L∆∞u b·ªô s·ªë li·ªáu</button>
        <select id="savedList" class="grow select"></select>
        <button class="btn ghost" id="loadBtn">Kh√¥i ph·ª•c</button>
        <button class="btn ghost" id="deleteBtn" title="X√≥a b·ªô ƒë√£ ch·ªçn">X√≥a</button>
        <span class="spacer"></span>
        <button class="btn secondary" id="exportCsvBtn">Xu·∫•t CSV</button>
        <button class="btn secondary" id="exportPdfBtn">Xu·∫•t PDF</button>
      </div>
      <p class="hint">C√¥ng b·ªë ch√≠nh th·ª©c: c·∫ßn ‚â•3/5 nh√≥m, b·∫Øt bu·ªôc c√≥ Nh√≥m IV v√† trong Nh√≥m IV ‚â•3 th√¥ng s·ªë.</p>
    </section>

    <div class="layout">
      <div class="main-form">
        <!-- Nh√≥m I -->
        <section class="card">
          <div class="group-title"><h2>Nh√≥m I ‚Äì pH</h2><span class="pill">ƒê∆°n v·ªã: ‚Äì</span></div>
          <div class="row">
            <label class="i">
              <span class="lab">pH</span>
              <input id="ph" type="number" step="0.01" inputmode="decimal" placeholder="7.2"/>
            </label>
          </div>
          <p class="hint">pH &lt; 5.5 ho·∫∑c &gt; 9 ‚áí WQI = 10; 5.5‚Äì6 v√† 8.5‚Äì9 n·ªôi suy; 6‚Äì8.5 ‚áí 100.</p>
        </section>

        <!-- Nh√≥m II -->
        <section class="card">
          <div class="group-title"><h2>Nh√≥m II ‚Äì Thu·ªëc BVTV</h2><span class="pill">Œºg/L</span></div>
          <div class="row">
            <label class="i"><span class="lab">Aldrin</span><input id="aldrin" type="number" step="0.001"/></label>
            <label class="i"><span class="lab">BHC</span><input id="bhc" type="number" step="0.001"/></label>
            <label class="i"><span class="lab">Dieldrin</span><input id="dieldrin" type="number" step="0.001"/></label>
            <label class="i"><span class="lab">T·ªïng DDT‚Çõ</span><input id="ddts" type="number" step="0.01"/></label>
            <label class="i"><span class="lab">Heptachlor &amp; epoxide</span><input id="hept" type="number" step="0.001"/></label>
          </div>
          <p class="hint">‚â§ ng∆∞·ª°ng ‚áí WQI=100; v∆∞·ª£t ‚áí 10.</p>
        </section>

        <!-- Nh√≥m III -->
        <section class="card">
          <div class="group-title"><h2>Nh√≥m III ‚Äì Kim lo·∫°i n·∫∑ng</h2><span class="pill">mg/L</span></div>
          <div class="row">
            <label class="i"><span class="lab">As</span><input id="as" type="number" step="0.0001"/></label>
            <label class="i"><span class="lab">Cd</span><input id="cd" type="number" step="0.0001"/></label>
            <label class="i"><span class="lab">Pb</span><input id="pb" type="number" step="0.0001"/></label>
            <label class="i"><span class="lab">Cr‚Å∂‚Å∫</span><input id="cr6" type="number" step="0.0001"/></label>
            <label class="i"><span class="lab">Cu</span><input id="cu" type="number" step="0.0001"/></label>
            <label class="i"><span class="lab">Zn</span><input id="zn" type="number" step="0.0001"/></label>
            <label class="i"><span class="lab">Hg</span><input id="hg" type="number" step="0.00001"/></label>
          </div>
        </section>

        <!-- Nh√≥m IV -->
        <section class="card">
          <div class="group-title"><h2>Nh√≥m IV ‚Äì H·ªØu c∆° &amp; dinh d∆∞·ª°ng</h2><span class="pill">mg/L (tr·ª´ DO%)</span></div>
          <div class="row">
            <label class="i"><span class="lab">DO (mg/L)</span><input id="do" type="number" step="0.01" inputmode="decimal" placeholder="5.7"/></label>
            <label class="i"><span class="lab">T (¬∞C)</span><input id="temp" type="number" step="0.1" inputmode="decimal" placeholder="27.5"/></label>
            <label class="i"><span class="lab">BOD‚ÇÖ</span><input id="bod" type="number" step="0.01" inputmode="decimal" placeholder="20"/></label>
            <label class="i"><span class="lab">COD</span><input id="cod" type="number" step="0.01" inputmode="decimal" placeholder="25"/></label>
            <label class="i"><span class="lab">TOC</span><input id="toc" type="number" step="0.01" inputmode="decimal" placeholder=""/></label>
            <label class="i"><span class="lab">N‚ÄìNH‚ÇÑ</span><input id="nh4" type="number" step="0.001" inputmode="decimal" placeholder="0.2"/></label>
            <label class="i"><span class="lab">N‚ÄìNO‚ÇÉ</span><input id="no3" type="number" step="0.01" inputmode="decimal" placeholder=""/></label>
            <label class="i"><span class="lab">N‚ÄìNO‚ÇÇ</span><input id="no2" type="number" step="0.001" inputmode="decimal" placeholder=""/></label>
            <label class="i"><span class="lab">P‚ÄìPO‚ÇÑ</span><input id="po4" type="number" step="0.01" inputmode="decimal" placeholder="0.3"/></label>
          </div>
          <p class="hint">DO t√≠nh theo % b√£o h√≤a t·ª´ DO ƒëo ƒë∆∞·ª£c v√† nhi·ªát ƒë·ªô.</p>
        </section>

        <!-- Nh√≥m V -->
        <section class="card">
          <div class="group-title"><h2>Nh√≥m V ‚Äì Vi sinh</h2><span class="pill">MPN/100 mL</span></div>
          <div class="row">
            <label class="i"><span class="lab">Coliform</span><input id="coli" type="number" step="1" inputmode="numeric" placeholder="10000"/></label>
            <label class="i"><span class="lab">E. coli</span><input id="ecoli" type="number" step="1" inputmode="numeric" placeholder=""/></label>
          </div>
        </section>

        <!-- T√πy ch·ªçn & t√≠nh -->
        <section class="card">
          <div class="group-title"><h2>T·ªïng h·ª£p &amp; t√≠nh to√°n</h2></div>
          <label class="inline"><input id="weighted" type="checkbox" /> √Åp d·ª•ng <b>tr·ªçng s·ªë √¥ nhi·ªÖm h·ªØu c∆°</b> (Nh√≥m IV=2, Nh√≥m V=1)</label>
          <div class="row" style="margin-top:10px">
            <button id="calc" class="btn">T√≠nh VN_WQI</button>
            <button id="clear" class="btn secondary" type="button">X√≥a s·ªë li·ªáu</button>
          </div>
        </section>

        <!-- Gi·∫£i th√≠ch & c√¥ng th·ª©c -->
        <section class="card" id="explainCard">
          <div class="group-title">
            <h2>Gi·∫£i th√≠ch &amp; c√¥ng th·ª©c</h2>
            <span class="pill">T·ª± ƒë·ªông c·∫≠p nh·∫≠t sau khi t√≠nh</span>
          </div>
          <div id="explain" class="explain">Nh·∫≠p s·ªë li·ªáu v√† b·∫•m ‚ÄúT√≠nh VN_WQI‚Äù‚Ä¶</div>
        </section>
      </div>

      <!-- RESULT PANEL -->
      <aside class="result-panel" id="resultPanel" aria-live="polite">
        <div class="sheet-handle" id="sheetHandle">
          <span class="drag"></span>
          <span class="sheet-title">K·∫øt qu·∫£ VN_WQI</span>
          <button class="btn tiny ghost" id="toggleSheet">Thu g·ªçn</button>
        </div>

        <div id="warnings" class="warnings"></div>

        <div class="score-wrap">
          <div id="score" class="score">‚Äì</div>
          <div id="label" class="label">M·ª©c ch·∫•t l∆∞·ª£ng: ‚Äì</div>
        </div>

        <div class="legend">
          <span class="chip sea">91‚Äì100: R·∫•t t·ªët</span>
          <span class="chip green">76‚Äì90: T·ªët</span>
          <span class="chip yellow">51‚Äì75: Trung b√¨nh</span>
          <span class="chip orange">26‚Äì50: X·∫•u</span>
          <span class="chip red">10‚Äì25: K√©m</span>
          <span class="chip brown">&lt;10: √î nhi·ªÖm r·∫•t n·∫∑ng</span>
        </div>

        <details class="detail">
          <summary>Chi ti·∫øt WQI theo nh√≥m & tham s·ªë</summary>
          <div id="detail"></div>
        </details>
      </aside>
    </div>
  </main>

  <div class="toast" id="toast"></div>
  <script src="app.js"></script>
</body>
</html>
